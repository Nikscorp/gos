# 6. Программно-конфигурируемые сети (SDN). Основные принципы, архитектура и преимущества. Протокол OpenFlow. Структура OpenFlow контроллера и коммутатора. Примеры применения.

## Основные принципы

Программно-Конфигурируемые Сети (Software Defined Networking/SDN) — это разделение плоскости передачи и управления данными, позволяющее осуществлять программное управление плоскостью передачи, которое может быть физически или логически отделено от аппаратных коммутаторов и маршрутизаторов.

1. Физически разделить уровень управления сетевым оборудованием от уровня управления передачей данных.
2. Перейти от управления отдельными экземплярами сетевого оборудования к управлению сетью в целом — логически централизованное управление.
3. Создать открытый программно-управляемый интерфейс между сетевыми приложениями и транспортной сетью.

## Архитектура

<img src="img/Screenshot 2020-05-27 at 06.25.58.png" alt="Screenshot 2020-05-27 at 06.25.58" style="zoom:25%;" />

<img src="img/Screenshot 2020-05-27 at 06.53.19.png" alt="Screenshot 2020-05-27 at 06.53.19" style="zoom: 33%;" />

## Преимущества

- Удешевление оборудования
- Облегчение управления сетью
- Программируемость, открытость, инновации

## OpenFlow

<img src="img/Screenshot 2020-05-27 at 06.27.49.png" alt="Screenshot 2020-05-27 at 06.27.49" style="zoom: 33%;" />

Поддерживается три типа сообщений:

- Сообщения контроллер-коммутатор
  - Конфигурирование коммутатора
  - Управление и контроль состояния
  - Управление таблицами потоков
  - Features, Configuration, Modify-State (flow-mod), Read-State (multipart request), Packet-out, Barrier, Role-Request
- Симметричные сообщения
  - Отправка в обоих направлениях
  - Обнаружение проблем соединения контроллера с коммутатором — Hello,Echo
- Ассиметричные сообщения
  - Отправка от коммутатора к контроллеру
  - Объявляют об изменении состояния сети, состояния коммутаторов
  - Packet-in, flow-removed, port-status, error

### Версии OpenFlow (это можно отнести к структуре коммутатора)

В 1.0 была только одна таблица потоков, что приводило к большому росту числа правил. В 1.1 таблиц стало несколько.

Также появились групповые таблицы позволяющие задать ряд действий и выбирать:

- Использование всех
- Одного случайного
- Одного определенного
- Первого живого

Также появилась Meter Table для учета количества трафика.

В версии 1.2 появились сценарии отказоустойчивости для контроллеров — Master / Slave.

Для быстрого матчинга в коммутаторах используется TCAM (Ternary Content Addressable Memory). Это когда у бита целых три значения — 0, 1 и ?, выдается адрес первой подходящей строки. Эта штука работает за константное время.

### Структура OpenFlow контроллера

- Программа,TCP/IPсервер,ожидающий подключения коммутаторов
- Отвечает за обеспечение взаимодействие приложения-коммутатор.
- Предоставляет важные сервисы(например, построение топологии, мониторинг хостов)
- API сетевой ОС или контроллер предоставляет возможность создавать приложения на основе централизованной модели программирования.

![image-20200527063455691](img/image-20200527063455691.png)

### Схема работы OpenFlow

- Реактивный режим
- Проактивный режим

Топология строится с помощью LLDP. Суть в том, что посылается Packet-Out на один из свитчей (на определенный порт), потом анализируется откуда пришел Packet-In и таким образом строится линк.

## Варианты применения SDN/OpenFlow

Области применения:

- Компании
- Телеком операторы и сервис провайдеры
- ЦОД и облака

Один из примеров применения:

Интеллектуальный Traffic Engineering:

- Выбор оптимального пути
- Реакция на отказ канала
- Резервирование пропускной способности

И так можно придумать еще кучу всего.