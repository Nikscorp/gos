# 7. Виртуализация сетевых сервисов (NFV). Основные принципы, этапы развития, архитектура, преимущества. Примеры применения.

Виртуализация сетевых функций (NFV) - это способ виртуализации сетевых служб, таких как маршрутизаторы, брандмауэры и балансировщики нагрузки, которые традиционно выполнялись на проприетарном оборудовании. Эти сервисы упаковываются в виртуальные машины, которые выполняются на обычном оборудовании, что позволяет поставщикам услуг запускать свою сеть на стандартных серверах вместо проприетарных. Таким образом оператор сети перестает зависеть от одного поставщика сетевого оборудования.

С NFV оператору сети не нужно иметь выделенное оборудование для каждой сетевой функции. NFV повышает масштабируемость и гибкость, позволяя поставщикам услуг предоставлять новые сетевые сервисы и приложения по требованию, не требуя дополнительных аппаратных ресурсов.

**Основные принципы**
Виртуализация сетевых функций (NFV, Network Function Virtualization) это технология, которая виртуализирует функциональность физических сетевых устройств, позволяя перенести ее на архитектуру ЦОД (вычислительные сервера, сервера хранения + коммутаторы). NFV программно реализует функции сетевых устройств, которые в дальнейшем запускаются на виртуальной инфраструктуре облака. NFV отделяет реализацию сетевых функций от непосредственного сетевого оборудования.

В NFV это делается при помощи виртуальных функций сети VNF (Virtualized network function). Виртуальная сетевая функция (Virtualized NF, VNF) - программная реализация сетевой функции, которая может быть установлена в виртуальной инфраструктуре. Примеры сетевых функций: DHCP, Firewall, NAT, VPN.

В архитектуре NFV становится возможным осуществлять надежное предоставление сервисов за счет распределенного резервирования ресурсов такой архитектуры, а также сбор данных для индикаторов производительности KPI (Key Performance Indicator) от аппаратных и программных компонентов NFV.
Отношения к ПКС 

* NFV дружественная к SDN технология, так как NFV позволяет создавать инфраструктуру, к которой применима ПКС архитектура. 
* NFV и ПКС взаимовыгодны друг другу, но не зависят друг от друга. 
* Сетевые функции могут быть виртуализованы без ПКС, также как и ПКС может быть запущен без NFV. 

**Этапы развития NFV**

1. Software implementation of network - программная имплементация сетевых функций: переход от быстрых аппаратных реализаций к программным реализациям
2. Network function modules - модули сетевых функций: разделение на функциональные модули, например DHCP, NAT, Rate limiting
3. Implementation in virtual machines - решения для виртуальных машин: переход к использованию виртуальных машин, отсюда появляются все преимущества виртуализации: быстрая доставка новых приложений, масштабируемость, мобильность и другие. Есть гипервизор и много виртуалок.
4. Standard API’s between modules - стандартные API для взаимодействия модулей

**Архитектура**

![img](https://lh3.googleusercontent.com/KPc4YrztPx0vRnHvSc2K-I6b9EVyoB6Xjg_VI1PjO-CGipRUqYW9ms2xp7xRbEnnC8xUABpoLvQxZrCNHzv5hzd-ZFVWzVzUMsjBELdbz2tuQCC__c55Lg4bqKAPCTwhnNDWfo9V)

Ключевыми элементами NFV архитектуры являются:

* Виртуальная Сетевая Функция (VNF): VNF программная реализация сетевой функции, которая может запуститься на NFV инфраструктуре (NFVI).
* NFV Инфраструктура (NFVI): NFVI включает вычислительные, сетевые ресурсы, а также ресурсы хранения, которые могут быть виртуализованы.
* Управление и Оркестрация (MANO) NFV: NFV MANO фокусируется на всех задачах связанных с виртуализацией, которые возникают на всех стадия жизненного цикла VNF.

**Преимущества**
NFV - перенос сетевых функций на виртуальные машины: 

* Автоматизация установки и настройки как софта, так и железа
* Поддержка нескольких поставщиков инфраструктуры 
* Уменьшение стоимости за счет использования стандартных серверов 
* Объединение сервисов в группы
* Целостность облачных приложений
* Восстановление после сбоев

**Варианты применения**
Облака: 

* NFVI as a service подобно IaaS (infrastructure as a service)
* VNF as a service
* Цепочки сервисов (VNF forwarding graphs)
* Платформа виртуальной сети as a service

Мобильные сети:

* Виртуализация ядра мобильной сети и IMS (не знаю что это)
* Виртуализация базовой мобильной станции

ЦОД:

* Виртуализация CDN

Доступ:

* Виртуализация домашней сети
* NFV фиксированного доступа

**Примеры**

BRAS 

* Терминация пользовательских сессий 
* Интересует выгода на одного пользователя ~ 1Mbps 
* Стоимость существующего решений примерно 10к за 10Gbps => Одно подключение = 1 
* С NFV: один сервер может обрабатывать 50Gbps. Стоимость 5k => Одно подключение = 0.1. 

CG-NAT 

* Трансляция адресов 
* Высокая стоимость существующих решений. 
* Экономия: 16 -> 4 -> 2 на подключение





